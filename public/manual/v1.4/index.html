<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  <title></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  
  <link rel="canonical" href="">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.1/dist/cosmo/bootstrap.min.css"
    integrity="sha384-dulfW0vmzZ638jigSgZXvDxMmd70GCnIv6oa+riKq6Kk4E0MKf7qmBfwP02wltv5" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    integrity="sha384-Ay26V7L8bsJTsX9Sxclnvsn+hkdiwRnrjZJXqKmkIDobPgIIWBOVguEcQQLDuhfN" crossorigin="anonymous">
  
  <script>
    (function() {
      function setTheme(mediaQuery) {
        document.documentElement.setAttribute('data-bs-theme',
          document.documentElement.style.colorScheme = mediaQuery.matches ? 'dark' : 'light');
      }
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
      setTheme(mediaQuery); mediaQuery.addEventListener('change', setTheme);
    })();
  </script>
</head>


  <body>
    <div class="container visually-hidden-focusable">
	<a class="d-inline-flex p-2" href="#main">Skip to main content</a>
	
	
	
</div>
<header class="navbar navbar-expand-md sticky-top bg-body-tertiary d-print-none">
	<nav class="container-lg" aria-label="Page navigation">
	<button type="button" class="navbar-toggler" data-bs-toggle="offcanvas" data-bs-target="#navbar-collapse"
		aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle page navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<a class="navbar-brand" href="/" aria-label="Top page">
		<img src="/jq.svg" alt="jq logo" style="height:1.5rem">
	</a>
	<div id="navbar-collapse" class="offcanvas offcanvas-start navbar-collapse w-auto" aria-labelledby="navbar-title">
		<div class="offcanvas-header">
		<h3 id="navbar-title" class="me-3">jq</h3>
		<button type="button" class="d-md-none btn-close" data-bs-dismiss="offcanvas" aria-label="Close page navigation"></button>
		</div>
		<ul class="offcanvas-body navbar-nav me-auto text-nowrap"><li class="nav-item d-md-none"><a class="nav-link"  href="/">Top page</a></li>
		
		<li class="nav-item">
			<a class="nav-link"  href="/tutorial/">
			Tutorial
			</a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link"  href="/download/">
			Download
			</a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link"  href="/manual/">
			Manual
			</a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link"  href="https://github.com/jqlang/jq">
			GitHub
			</a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link"  href="https://github.com/jqlang/jq/issues">
			Issues
			</a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link"  href="https://jqplay.org">
			Try online!
			</a>
		</li>
		
		<li class="nav-item">
			<a class="nav-link"  href="/news/">
			News
			</a>
		</li>
		
		</ul>
	</div>
	
	
	
	
	
	
	
	
	<a class="d-md-none bi bi-github fs-4 text-body" href="https://github.com/jqlang/jq" target="_blank" rel="noopener" aria-label="GitHub"></a>
	</nav>
</header>


    <main id="main" class="container-lg">
<h1>jq 1.4 Manual</h1>
<p>A jq program is a &ldquo;filter&rdquo;: it takes an input, and produces an
output. There are a lot of builtin filters for extracting a
particular field of an object, or converting a number to a string,
or various other standard tasks.</p>
<p>Filters can be combined in various ways - you can pipe the output of
one filter into another filter, or collect the output of a filter
into an array.</p>
<p>Some filters produce multiple results, for instance there&rsquo;s one that
produces all the elements of its input array. Piping that filter
into a second runs the second filter for each element of the
array. Generally, things that would be done with loops and iteration
in other languages are just done by gluing filters together in jq.</p>
<p>It&rsquo;s important to remember that every filter has an input and an
output. Even literals like &ldquo;hello&rdquo; or 42 are filters - they take an
input but always produce the same literal as output. Operations that
combine two filters, like addition, generally feed the same input to
both and combine the results. So, you can implement an averaging
filter as <code>add / length</code> - feeding the input array both to the <code>add</code>
filter and the <code>length</code> filter and dividing the results.</p>
<p>But that&rsquo;s getting ahead of ourselves. :) Let&rsquo;s start with something
simpler:</p>
<h2 id="invoking-jq">Invoking jq</h2>
<p>jq filters run on a stream of JSON data. The input to jq is
parsed as a sequence of whitespace-separated JSON values which
are passed through the provided filter one at a time. The
output(s) of the filter are written to standard output, as a
sequence of newline-separated JSON data.</p>
<p>Note: it is important to mind the shell&rsquo;s quoting rules.  As a
general rule it&rsquo;s best to always quote (with single-quote
characters) the jq program, as too many characters with special
meaning to jq are also shell meta-characters.  For example, <code>jq &quot;foo&quot;</code> will fail on most Unix shells because that will be the same
as <code>jq foo</code>, which will generally fail because <code>foo is not defined</code>.  When using the Windows command shell (cmd.exe) it&rsquo;s
best to use double quotes around your jq program when given on the
command-line (instead of the <code>-f program-file</code> option), but then
double-quotes in the jq program need backslash escaping.</p>
<p>You can affect how jq reads and writes its input and output
using some command-line options:</p>
<ul>
<li>
<p><code>--null-input</code> / <code>-n</code>:</p>
<p>Don&rsquo;t read any input at all. Instead, the filter is run once
using <code>null</code> as the input. This is useful when using jq as a
simple calculator or to construct JSON data from scratch.</p>
</li>
<li>
<p><code>--raw-input</code> / <code>-R</code>:</p>
<p>Don&rsquo;t parse the input as JSON. Instead, each line of text is
passed to the filter as a string. If combined with <code>--slurp</code>,
then the entire input is passed to the filter as a single long
string.</p>
</li>
<li>
<p><code>--slurp</code> / <code>-s</code>:</p>
<p>Instead of running the filter for each JSON object in the
input, read the entire input stream into a large array and run
the filter just once.</p>
</li>
<li>
<p><code>--online-input</code> / <code>-I</code>:</p>
<p>When the top-level input value is an array produce its elements
instead of the array.  This allows on-line processing of
potentially very large top-level arrays&rsquo; elements.</p>
</li>
<li>
<p><code>--compact-output</code> / <code>-c</code>:</p>
<p>By default, jq pretty-prints JSON output. Using this option
will result in more compact output by instead putting each
JSON object on a single line.</p>
</li>
<li>
<p><code>--raw-output</code> / <code>-r</code>:</p>
<p>With this option, if the filter&rsquo;s result is a string then it
will be written directly to standard output rather than being
formatted as a JSON string with quotes. This can be useful for
making jq filters talk to non-JSON-based systems.</p>
</li>
<li>
<p><code>--ascii-output</code> / <code>-a</code>:</p>
<p>jq usually outputs non-ASCII Unicode codepoints as UTF-8, even
if the input specified them as escape sequences (like
&ldquo;\u03bc&rdquo;). Using this option, you can force jq to produce pure
ASCII output with every non-ASCII character replaced with the
equivalent escape sequence.</p>
</li>
<li>
<p><code>--sort-keys</code> / <code>-S</code>:</p>
<p>Output the fields of each object with the keys in sorted order.</p>
</li>
<li>
<p><code>--color-output</code> / <code>-C</code> and <code>--monochrome-output</code> / <code>-M</code>:</p>
<p>By default, jq outputs colored JSON if writing to a
terminal. You can force it to produce color even if writing to
a pipe or a file using <code>-C</code>, and disable color with <code>-M</code>.</p>
</li>
<li>
<p><code>--unbuffered</code>:</p>
<p>Flush the output after each JSON object is printed (useful if
you&rsquo;re piping a slow data source into jq and piping jq&rsquo;s
output elsewhere).</p>
</li>
<li>
<p><code>-f filename</code> / <code>--from-file filename</code>:</p>
<p>Read filter from the file rather than from a command line, like
awk&rsquo;s -f option. You can also use &lsquo;#&rsquo; to make comments.</p>
</li>
<li>
<p><code>--arg name value</code>:</p>
<p>This option passes a value to the jq program as a predefined
variable. If you run jq with <code>--arg foo bar</code>, then <code>$foo</code> is
available in the program and has the value <code>&quot;bar&quot;</code>.</p>
</li>
<li>
<p><code>--argfile name filename</code>:</p>
<p>This option passes the first value from the named file as a
value to the jq program as a predefined variable. If you run jq
with <code>--argfile foo bar</code>, then <code>$foo</code> is available in the
program and has the value resulting from parsing the content of
the file named <code>bar</code>.</p>
</li>
<li>
<p><code>--exit-status</code> / <code>-e</code>:</p>
<p>Sets the exit status of jq to 0 if the last output value was
neither <code>false</code> nor <code>null</code>, 1 if the last output value was
either <code>false</code> or <code>null</code>, or 4 if no valid result was ever
produced.  Normally jq exits with 2 if there was any usage
problem or system error, 3 if there was a jq program compile
error, or 0 if the jq program ran.</p>
</li>
<li>
<p><code>--version</code> / <code>-V</code>:</p>
<p>Output the jq version and exit with zero.</p>
</li>
<li>
<p><code>--help</code> / <code>-h</code>:</p>
<p>Output the jq help and exit with zero.</p>
</li>
</ul>
<h2 id="basic-filters">Basic filters</h2>
<h3 id="heading"><code>.</code></h3>
<p>The absolute simplest (and least interesting) filter
is <code>.</code>. This is a filter that takes its input and
produces it unchanged as output.</p>
<p>Since jq by default pretty-prints all output, this trivial
program can be a useful way of formatting JSON output from,
say, <code>curl</code>.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;Hello, world!&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;Hello, world!&#34;</span>
</span></span></code></pre></div><h3 id="foo-foobar"><code>.foo</code>, <code>.foo.bar</code></h3>
<p>The simplest <em>useful</em> filter is <code>.foo</code>. When given a
JSON object (aka dictionary or hash) as input, it produces
the value at the key &ldquo;foo&rdquo;, or null if there&rsquo;s none present.</p>
<p>If the key contains special characters or starts with a digit,
you need to surround it with double quotes like this: <code>.&quot;foo$&quot;</code>.</p>
<p>A filter of the form <code>.foo.bar</code> is equivalent to <code>.foo|.bar</code>.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.foo
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">42</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#e6db74">&#34;less interesting data&#34;</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">42</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.foo
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;notfoo&#34;</span>: <span style="color:#66d9ef">true</span>, <span style="color:#f92672">&#34;alsonotfoo&#34;</span>: <span style="color:#66d9ef">false</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[&#34;foo&#34;]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">42</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">42</span>
</span></span></code></pre></div><h3 id="foo"><code>.foo?</code></h3>
<p>Just like <code>.foo</code>, but does not output an error when <code>.</code> is not an
object.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.foo?
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">42</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#e6db74">&#34;less interesting data&#34;</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">42</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.foo?
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;notfoo&#34;</span>: <span style="color:#66d9ef">true</span>, <span style="color:#f92672">&#34;alsonotfoo&#34;</span>: <span style="color:#66d9ef">false</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[&#34;foo&#34;]?
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">42</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">42</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.foo?]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[]
</span></span></code></pre></div><h3 id="string-number-numbernumber"><code>.[&lt;string&gt;]</code>, <code>.[&lt;number&gt;]</code>, <code>.[&lt;number&gt;:&lt;number&gt;]</code></h3>
<p>You can also look up fields of an object using syntax like
<code>.[&quot;foo&quot;]</code> (<code>.foo</code> above is a shorthand version of this). This
one works for arrays as well, if the key is an integer. Arrays
are zero-based, so <code>.[2]</code> returns the third element of the array.</p>
<p>The <code>.[10:15]</code> syntax can be used to return a subarray of an
array or substring of a string. The array returned by
<code>.[10:15]</code> will be of length 5, containing the elements from
index 10 (inclusive) to index 15 (exclusive). Either index may
be negative (in which case it counts backwards from the end of
the array), or omitted (in which case it refers to the start
or end of the array). Indices are zero-based.</p>
<p>The <code>?</code> &ldquo;operator&rdquo; can also be used with the slice operator,
as in <code>.[10:15]?</code>, which outputs values where the inputs are
slice-able.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[0]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;JSON&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">true</span>}, {<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;XML&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">false</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;JSON&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">true</span>}
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[2]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;JSON&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">true</span>}, {<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;XML&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">false</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[2:4]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;d&#34;</span>,<span style="color:#e6db74">&#34;e&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;c&#34;</span>, <span style="color:#e6db74">&#34;d&#34;</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[2:4]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;abcdefghi&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;cd&#34;</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[:3]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;d&#34;</span>,<span style="color:#e6db74">&#34;e&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[-2:]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;d&#34;</span>,<span style="color:#e6db74">&#34;e&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;d&#34;</span>, <span style="color:#e6db74">&#34;e&#34;</span>]
</span></span></code></pre></div><h3 id="heading-1"><code>.[]</code></h3>
<p>If you use the <code>.[index]</code> syntax, but omit the index
entirely, it will return <em>all</em> of the elements of an
array. Running <code>.[]</code> with the input <code>[1,2,3]</code> will produce the
numbers as three separate results, rather than as a single
array.</p>
<p>You can also use this on an object, and it will return all
the values of the object.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;JSON&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">true</span>}, {<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;XML&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">false</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;JSON&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">true</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;XML&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">false</span>}
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;b&#34;</span>: <span style="color:#ae81ff">1</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h3 id="heading-2"><code>.[]?</code></h3>
<p>Like <code>.[]</code>, but no errors will be output if . is not an array
or object.</p>
<h3 id="heading-3"><code>,</code></h3>
<p>If two filters are separated by a comma, then the
input will be fed into both and there will be multiple
outputs: first, all of the outputs produced by the left
expression, and then all of the outputs produced by the
right. For instance, filter <code>.foo, .bar</code>, produces
both the &ldquo;foo&rdquo; fields and &ldquo;bar&rdquo; fields as separate outputs.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.foo, .bar
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">42</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#e6db74">&#34;something else&#34;</span>, <span style="color:#f92672">&#34;baz&#34;</span>: <span style="color:#66d9ef">true</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">42</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;something else&#34;</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.user, .projects[]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;user&#34;</span>:<span style="color:#e6db74">&#34;stedolan&#34;</span>, <span style="color:#f92672">&#34;projects&#34;</span>: [<span style="color:#e6db74">&#34;jq&#34;</span>, <span style="color:#e6db74">&#34;wikiflow&#34;</span>]}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;stedolan&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;jq&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;wikiflow&#34;</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[4,2]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;d&#34;</span>,<span style="color:#e6db74">&#34;e&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;e&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;c&#34;</span>
</span></span></code></pre></div><h3 id="heading-4"><code>|</code></h3>
<p>The | operator combines two filters by feeding the output(s) of
the one on the left into the input of the one on the right. It&rsquo;s
pretty much the same as the Unix shell&rsquo;s pipe, if you&rsquo;re used to
that.</p>
<p>If the one on the left produces multiple results, the one on
the right will be run for each of those results. So, the
expression <code>.[] | .foo</code> retrieves the &ldquo;foo&rdquo; field of each
element of the input array.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[] | .name
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;JSON&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">true</span>}, {<span style="color:#f92672">&#34;name&#34;</span>:<span style="color:#e6db74">&#34;XML&#34;</span>, <span style="color:#f92672">&#34;good&#34;</span>:<span style="color:#66d9ef">false</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;JSON&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;XML&#34;</span>
</span></span></code></pre></div><h2 id="types-and-values">Types and Values</h2>
<p>jq supports the same set of datatypes as JSON - numbers,
strings, booleans, arrays, objects (which in JSON-speak are
hashes with only string keys), and &ldquo;null&rdquo;.</p>
<p>Booleans, null, strings and numbers are written the same way as
in JSON. Just like everything else in jq, these simple
values take an input and produce an output - <code>42</code> is a valid jq
expression that takes an input, ignores it, and returns 42
instead.</p>
<h3 id="array-construction-">Array construction: <code>[]</code></h3>
<p>As in JSON, <code>[]</code> is used to construct arrays, as in
<code>[1,2,3]</code>. The elements of the arrays can be any jq
expression. All of the results produced by all of the
expressions are collected into one big array. You can use it
to construct an array out of a known quantity of values (as
in <code>[.foo, .bar, .baz]</code>) or to &ldquo;collect&rdquo; all the results of a
filter into an array (as in <code>[.items[].name]</code>)</p>
<p>Once you understand the &ldquo;,&rdquo; operator, you can look at jq&rsquo;s array
syntax in a different light: the expression <code>[1,2,3]</code> is not using a
built-in syntax for comma-separated arrays, but is instead applying
the <code>[]</code> operator (collect results) to the expression 1,2,3 (which
produces three different results).</p>
<p>If you have a filter <code>X</code> that produces four results,
then the expression <code>[X]</code> will produce a single result, an
array of four elements.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.user, .projects[]]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;user&#34;</span>:<span style="color:#e6db74">&#34;stedolan&#34;</span>, <span style="color:#f92672">&#34;projects&#34;</span>: [<span style="color:#e6db74">&#34;jq&#34;</span>, <span style="color:#e6db74">&#34;wikiflow&#34;</span>]}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;stedolan&#34;</span>, <span style="color:#e6db74">&#34;jq&#34;</span>, <span style="color:#e6db74">&#34;wikiflow&#34;</span>]
</span></span></code></pre></div><h3 id="objects-">Objects: <code>{}</code></h3>
<p>Like JSON, <code>{}</code> is for constructing objects (aka
dictionaries or hashes), as in: <code>{&quot;a&quot;: 42, &quot;b&quot;: 17}</code>.</p>
<p>If the keys are &ldquo;sensible&rdquo; (all alphabetic characters), then
the quotes can be left off. The value can be any expression
(although you may need to wrap it in parentheses if it&rsquo;s a
complicated one), which gets applied to the {} expression&rsquo;s
input (remember, all filters have an input and an
output).</p>
<pre><code>{foo: .bar}
</code></pre>
<p>will produce the JSON object <code>{&quot;foo&quot;: 42}</code> if given the JSON
object <code>{&quot;bar&quot;:42, &quot;baz&quot;:43}</code>. You can use this to select
particular fields of an object: if the input is an object
with &ldquo;user&rdquo;, &ldquo;title&rdquo;, &ldquo;id&rdquo;, and &ldquo;content&rdquo; fields and you
just want &ldquo;user&rdquo; and &ldquo;title&rdquo;, you can write</p>
<pre><code>{user: .user, title: .title}
</code></pre>
<p>Because that&rsquo;s so common, there&rsquo;s a shortcut syntax: <code>{user, title}</code>.</p>
<p>If one of the expressions produces multiple results,
multiple dictionaries will be produced. If the input&rsquo;s</p>
<pre><code>{&quot;user&quot;:&quot;stedolan&quot;,&quot;titles&quot;:[&quot;JQ Primer&quot;, &quot;More JQ&quot;]}
</code></pre>
<p>then the expression</p>
<pre><code>{user, title: .titles[]}
</code></pre>
<p>will produce two outputs:</p>
<pre><code>{&quot;user&quot;:&quot;stedolan&quot;, &quot;title&quot;: &quot;JQ Primer&quot;}
{&quot;user&quot;:&quot;stedolan&quot;, &quot;title&quot;: &quot;More JQ&quot;}
</code></pre>
<p>Putting parentheses around the key means it will be evaluated as an
expression. With the same input as above,</p>
<pre><code>{(.user): .titles}
</code></pre>
<p>produces</p>
<pre><code>{&quot;stedolan&quot;: [&quot;JQ Primer&quot;, &quot;More JQ&quot;]}
</code></pre>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">{user, title: .titles[]}
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;user&#34;</span>:<span style="color:#e6db74">&#34;stedolan&#34;</span>,<span style="color:#f92672">&#34;titles&#34;</span>:[<span style="color:#e6db74">&#34;JQ Primer&#34;</span>, <span style="color:#e6db74">&#34;More JQ&#34;</span>]}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;user&#34;</span>:<span style="color:#e6db74">&#34;stedolan&#34;</span>, <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;JQ Primer&#34;</span>}
</span></span><span style="display:flex;"><span>{<span style="color:#f92672">&#34;user&#34;</span>:<span style="color:#e6db74">&#34;stedolan&#34;</span>, <span style="color:#f92672">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;More JQ&#34;</span>}
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">{(.user): .titles}
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;user&#34;</span>:<span style="color:#e6db74">&#34;stedolan&#34;</span>,<span style="color:#f92672">&#34;titles&#34;</span>:[<span style="color:#e6db74">&#34;JQ Primer&#34;</span>, <span style="color:#e6db74">&#34;More JQ&#34;</span>]}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;stedolan&#34;</span>: [<span style="color:#e6db74">&#34;JQ Primer&#34;</span>, <span style="color:#e6db74">&#34;More JQ&#34;</span>]}
</span></span></code></pre></div><h2 id="builtin-operators-and-functions">Builtin operators and functions</h2>
<p>Some jq operators (for instance, <code>+</code>) do different things
depending on the type of their arguments (arrays, numbers,
etc.). However, jq never does implicit type conversions. If you
try to add a string to an object you&rsquo;ll get an error message and
no result.</p>
<h3 id="addition-">Addition: <code>+</code></h3>
<p>The operator <code>+</code> takes two filters, applies them both
to the same input, and adds the results together. What
&ldquo;adding&rdquo; means depends on the types involved:</p>
<ul>
<li>
<p><strong>Numbers</strong> are added by normal arithmetic.</p>
</li>
<li>
<p><strong>Arrays</strong> are added by being concatenated into a larger array.</p>
</li>
<li>
<p><strong>Strings</strong> are added by being joined into a larger string.</p>
</li>
<li>
<p><strong>Objects</strong> are added by merging, that is, inserting all
the key-value pairs from both objects into a single
combined object. If both objects contain a value for the
same key, the object on the right of the <code>+</code> wins. (For
recursive merge use the <code>*</code> operator.)</p>
</li>
</ul>
<p><code>null</code> can be added to any value, and returns the other
value unchanged.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.a + 1
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>: <span style="color:#ae81ff">7</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">8</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.a + .b
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>: [<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>], <span style="color:#f92672">&#34;b&#34;</span>: [<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>]}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.a + null
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>: <span style="color:#ae81ff">1</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.a + 1
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">{a: 1} + {b: 2} + {c: 3} + {a: 42}
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>: <span style="color:#ae81ff">42</span>, <span style="color:#f92672">&#34;b&#34;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#f92672">&#34;c&#34;</span>: <span style="color:#ae81ff">3</span>}
</span></span></code></pre></div><h3 id="subtraction--">Subtraction: <code>-</code></h3>
<p>As well as normal arithmetic subtraction on numbers, the <code>-</code>
operator can be used on arrays to remove all occurrences of
the second array&rsquo;s elements from the first array.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">4 - .a
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>:<span style="color:#ae81ff">3</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">. - [&#34;xml&#34;, &#34;yaml&#34;]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;xml&#34;</span>, <span style="color:#e6db74">&#34;yaml&#34;</span>, <span style="color:#e6db74">&#34;json&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;json&#34;</span>]
</span></span></code></pre></div><h3 id="multiplication-division-modulo---">Multiplication, division, modulo: <code>*</code>, <code>/</code>, <code>%</code></h3>
<p>These operators only work on numbers, and do the expected.</p>
<p>Multiplying a string by a number produces the concatenation of
that string that many times.</p>
<p>Dividing a string by another splits the first using the second
as separators.</p>
<p>Multiplying two objects will merge them recursively: this works
like addition but if both objects contain a value for the
same key, and the values are objects, the two are merged with
the same strategy.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">10 / . * 3
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">5</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">6</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">. / &#34;, &#34;
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;a, b,c,d, e&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b,c,d&#34;</span>,<span style="color:#e6db74">&#34;e&#34;</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">{&#34;k&#34;: {&#34;a&#34;: 1, &#34;b&#34;: 2}} * {&#34;k&#34;: {&#34;a&#34;: 0,&#34;c&#34;: 3}}
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;k&#34;</span>: {<span style="color:#f92672">&#34;a&#34;</span>: <span style="color:#ae81ff">0</span>, <span style="color:#f92672">&#34;b&#34;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#f92672">&#34;c&#34;</span>: <span style="color:#ae81ff">3</span>}}
</span></span></code></pre></div><h3 id="length"><code>length</code></h3>
<p>The builtin function <code>length</code> gets the length of various
different types of value:</p>
<ul>
<li>
<p>The length of a <strong>string</strong> is the number of Unicode
codepoints it contains (which will be the same as its
JSON-encoded length in bytes if it&rsquo;s pure ASCII).</p>
</li>
<li>
<p>The length of an <strong>array</strong> is the number of elements.</p>
</li>
<li>
<p>The length of an <strong>object</strong> is the number of key-value pairs.</p>
</li>
<li>
<p>The length of <strong>null</strong> is zero.</p>
</li>
</ul>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[] | length
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>], <span style="color:#e6db74">&#34;string&#34;</span>, {<span style="color:#f92672">&#34;a&#34;</span>:<span style="color:#ae81ff">2</span>}, <span style="color:#66d9ef">null</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">0</span>
</span></span></code></pre></div><h3 id="keys"><code>keys</code></h3>
<p>The builtin function <code>keys</code>, when given an object, returns
its keys in an array.</p>
<p>The keys are sorted &ldquo;alphabetically&rdquo;, by unicode codepoint
order. This is not an order that makes particular sense in
any particular language, but you can count on it being the
same for any two objects with the same set of keys,
regardless of locale settings.</p>
<p>When <code>keys</code> is given an array, it returns the valid indices
for that array: the integers from 0 to length-1.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">keys
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;abc&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;abcd&#34;</span>: <span style="color:#ae81ff">2</span>, <span style="color:#f92672">&#34;Foo&#34;</span>: <span style="color:#ae81ff">3</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;Foo&#34;</span>, <span style="color:#e6db74">&#34;abc&#34;</span>, <span style="color:#e6db74">&#34;abcd&#34;</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">keys
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">42</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">35</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>]
</span></span></code></pre></div><h3 id="has"><code>has</code></h3>
<p>The builtin function <code>has</code> returns whether the input object
has the given key, or the input array has an element at the
given index.</p>
<p><code>has($key)</code> has the same effect as checking whether <code>$key</code>
is a member of the array returned by <code>keys</code>, although <code>has</code>
will be faster.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">map(has(&#34;foo&#34;))
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">42</span>}, {}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">map(has(2))
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>], [<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>]
</span></span></code></pre></div><h3 id="del"><code>del</code></h3>
<p>The builtin function <code>del</code> removes a key and its corresponding
value from an object.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">del(.foo)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">42</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#ae81ff">9001</span>, <span style="color:#f92672">&#34;baz&#34;</span>: <span style="color:#ae81ff">42</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#ae81ff">9001</span>, <span style="color:#f92672">&#34;baz&#34;</span>: <span style="color:#ae81ff">42</span>}
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">del(.[1, 2])
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;foo&#34;</span>, <span style="color:#e6db74">&#34;bar&#34;</span>, <span style="color:#e6db74">&#34;baz&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;foo&#34;</span>]
</span></span></code></pre></div><h3 id="to_entries-from_entries-with_entriesf"><code>to_entries</code>, <code>from_entries</code>, <code>with_entries(f)</code></h3>
<p>These functions convert between an object and an array of
key-value pairs. If <code>to_entries</code> is passed an object, then
for each <code>k: v</code> entry in the input, the output array
includes <code>{&quot;key&quot;: k, &quot;value&quot;: v}</code>.</p>
<p><code>from_entries</code> does the opposite conversion, and
<code>with_entries(f)</code> is a shorthand for <code>to_entries | map(f) | from_entries</code>, useful for doing some operation to all keys
and values of an object.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">to_entries
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;b&#34;</span>: <span style="color:#ae81ff">2</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;key&#34;</span>:<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#f92672">&#34;value&#34;</span>:<span style="color:#ae81ff">1</span>}, {<span style="color:#f92672">&#34;key&#34;</span>:<span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#f92672">&#34;value&#34;</span>:<span style="color:#ae81ff">2</span>}]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">from_entries
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;key&#34;</span>:<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#f92672">&#34;value&#34;</span>:<span style="color:#ae81ff">1</span>}, {<span style="color:#f92672">&#34;key&#34;</span>:<span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#f92672">&#34;value&#34;</span>:<span style="color:#ae81ff">2</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;b&#34;</span>: <span style="color:#ae81ff">2</span>}
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">with_entries(.key |= &#34;KEY_&#34; + .)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;a&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;b&#34;</span>: <span style="color:#ae81ff">2</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;KEY_a&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;KEY_b&#34;</span>: <span style="color:#ae81ff">2</span>}
</span></span></code></pre></div><h3 id="select"><code>select</code></h3>
<p>The function <code>select(foo)</code> produces its input unchanged if
<code>foo</code> returns true for that input, and produces no output
otherwise.</p>
<p>It&rsquo;s useful for filtering lists: <code>[1,2,3] | map(select(. &gt;= 2))</code>
will give you <code>[2,3]</code>.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">map(select(. &gt;= 2))
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">7</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>]
</span></span></code></pre></div><h3 id="arrays-objects-iterables-booleans-numbers-strings-nulls-values-scalars"><code>arrays</code>, <code>objects</code>, <code>iterables</code>, <code>booleans</code>, <code>numbers</code>, <code>strings</code>, <code>nulls</code>, <code>values</code>, <code>scalars</code></h3>
<p>These built-ins select only inputs that are arrays, objects,
iterables (arrays or objects), booleans, numbers, strings,
null, non-null values, and non-iterables, respectively.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[]|numbers
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[],{},<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#34;foo&#34;</span>,<span style="color:#66d9ef">null</span>,<span style="color:#66d9ef">true</span>,<span style="color:#66d9ef">false</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h3 id="empty"><code>empty</code></h3>
<p><code>empty</code> returns no results. None at all. Not even <code>null</code>.</p>
<p>It&rsquo;s useful on occasion. You&rsquo;ll know if you need it :)</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">1, empty, 2
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[1,2,empty,3]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]
</span></span></code></pre></div><h3 id="mapf"><code>map(f)</code></h3>
<p>For any filter <code>f</code>, <code>map(f)</code> will run that filter for each
element of the input array, and produce the outputs a new
array. <code>map(.+1)</code> will increment each element of an array of numbers.</p>
<p><code>map(f)</code> is equivalent to <code>[.[] | f]</code>. In fact, this is how
it&rsquo;s defined.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">map(.+1)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>]
</span></span></code></pre></div><h3 id="paths"><code>paths</code></h3>
<p>Outputs the paths to all the elements in its input (except it
does not output the empty list, representing . itself).</p>
<p><code>paths</code> is equivalent to</p>
<pre><code>def paths: path(recurse(if (type|. == &quot;array&quot; or . == &quot;object&quot;) then .[] else empty end))|select(length &gt; 0);
</code></pre>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[paths]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,[[],{<span style="color:#f92672">&#34;a&#34;</span>:<span style="color:#ae81ff">2</span>}]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[<span style="color:#ae81ff">0</span>],[<span style="color:#ae81ff">1</span>],[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">0</span>],[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>],[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#34;a&#34;</span>]]
</span></span></code></pre></div><h3 id="leaf_paths"><code>leaf_paths</code></h3>
<p>Outputs the paths to all the leaves (non-array, non-object
elements) in its input.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[leaf_paths]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,[[],{<span style="color:#f92672">&#34;a&#34;</span>:<span style="color:#ae81ff">2</span>}]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[<span style="color:#ae81ff">0</span>],[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#34;a&#34;</span>]]
</span></span></code></pre></div><h3 id="add"><code>add</code></h3>
<p>The filter <code>add</code> takes as input an array, and produces as
output the elements of the array added together. This might
mean summed, concatenated or merged depending on the types
of the elements of the input array - the rules are the same
as those for the <code>+</code> operator (described above).</p>
<p>If the input is an empty array, <code>add</code> returns <code>null</code>.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">add
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;abc&#34;</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">add
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">6</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">add
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><h3 id="any"><code>any</code></h3>
<p>The filter <code>any</code> takes as input an array of boolean values,
and produces <code>true</code> as output if any of the elements of
the array are <code>true</code>.</p>
<p>If the input is an empty array, <code>any</code> returns <code>false</code>.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">any
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">any
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">any
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><h3 id="all"><code>all</code></h3>
<p>The filter <code>all</code> takes as input an array of boolean values,
and produces <code>true</code> as output if all of the elements of
the array are <code>true</code>.</p>
<p>If the input is an empty array, <code>all</code> returns <code>true</code>.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">all
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">all
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">true</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">all
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span></code></pre></div><h3 id="range"><code>range</code></h3>
<p>The <code>range</code> function produces a range of numbers. <code>range(4;10)</code>
produces 6 numbers, from 4 (inclusive) to 10 (exclusive). The numbers
are produced as separate outputs. Use <code>[range(4;10)]</code> to get a range as
an array.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">range(2;4)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[range(2;4)]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]
</span></span></code></pre></div><h3 id="floor"><code>floor</code></h3>
<p>The <code>floor</code> function returns the floor of its numeric input.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">floor
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">3.14159</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span></code></pre></div><h3 id="sqrt"><code>sqrt</code></h3>
<p>The <code>sqrt</code> function returns the square root of its numeric input.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">sqrt
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">9</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span></code></pre></div><h3 id="tonumber"><code>tonumber</code></h3>
<p>The <code>tonumber</code> function parses its input as a number. It
will convert correctly-formatted strings to their numeric
equivalent, leave numbers alone, and give an error on all other input.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[] | tonumber
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;1&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h3 id="tostring"><code>tostring</code></h3>
<p>The <code>tostring</code> function prints its input as a
string. Strings are left unchanged, and all other values are
JSON-encoded.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[] | tostring
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;1&#34;</span>, [<span style="color:#ae81ff">1</span>]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;[1]&#34;</span>
</span></span></code></pre></div><h3 id="type"><code>type</code></h3>
<p>The <code>type</code> function returns the type of its argument as a
string, which is one of null, boolean, number, string, array
or object.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">map(type)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">false</span>, [], {}, <span style="color:#66d9ef">null</span>, <span style="color:#e6db74">&#34;hello&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;number&#34;</span>, <span style="color:#e6db74">&#34;boolean&#34;</span>, <span style="color:#e6db74">&#34;array&#34;</span>, <span style="color:#e6db74">&#34;object&#34;</span>, <span style="color:#e6db74">&#34;null&#34;</span>, <span style="color:#e6db74">&#34;string&#34;</span>]
</span></span></code></pre></div><h3 id="sort-sort_by"><code>sort</code>, <code>sort_by</code></h3>
<p>The <code>sort</code> functions sorts its input, which must be an
array. Values are sorted in the following order:</p>
<ul>
<li><code>null</code></li>
<li><code>false</code></li>
<li><code>true</code></li>
<li>numbers</li>
<li>strings, in alphabetical order (by unicode codepoint value)</li>
<li>arrays, in lexical order</li>
<li>objects</li>
</ul>
<p>The ordering for objects is a little complex: first they&rsquo;re
compared by comparing their sets of keys (as arrays in
sorted order), and if their keys are equal then the values
are compared key by key.</p>
<p><code>sort_by</code> may be used to sort by a particular field of an
object, or by applying any jq filter. <code>sort_by(foo)</code>
compares two elements by comparing the result of <code>foo</code> on
each element.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">sort
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">3</span>,<span style="color:#66d9ef">null</span>,<span style="color:#ae81ff">6</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">null</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">8</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">sort_by(.foo)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">4</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">10</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">3</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">100</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">2</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">1</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">2</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">1</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">3</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">100</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">4</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">10</span>}]
</span></span></code></pre></div><h3 id="group_by"><code>group_by</code></h3>
<p><code>group_by(.foo)</code> takes as input an array, groups the
elements having the same <code>.foo</code> field into separate arrays,
and produces all of these arrays as elements of a larger
array, sorted by the value of the <code>.foo</code> field.</p>
<p>Any jq expression, not just a field access, may be used in
place of <code>.foo</code>. The sorting order is the same as described
in the <code>sort</code> function above.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">group_by(.foo)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">10</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">3</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">100</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">1</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[{<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">10</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">1</span>}], [{<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">3</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">100</span>}]]
</span></span></code></pre></div><h3 id="min-max-min_by-max_by"><code>min</code>, <code>max</code>, <code>min_by</code>, <code>max_by</code></h3>
<p>Find the minimum or maximum element of the input array. The
<code>_by</code> versions allow you to specify a particular field or
property to examine, e.g. <code>min_by(.foo)</code> finds the object
with the smallest <code>foo</code> field.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">min
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">7</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">max_by(.foo)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">14</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">2</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">3</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">2</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">3</span>}
</span></span></code></pre></div><h3 id="unique"><code>unique</code></h3>
<p>The <code>unique</code> function takes as input an array and produces
an array of the same elements, in sorted order, with
duplicates removed.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">unique
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">5</span>]
</span></span></code></pre></div><h3 id="unique_by"><code>unique_by</code></h3>
<p>The <code>unique_by(.foo)</code> function takes as input an array and produces
an array of the same elements, in sorted order, with
elements with a duplicate <code>.foo</code> field removed. Think of it as making
an array by taking one element out of every group produced by
<code>group_by</code>.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">unique_by(.foo)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#ae81ff">2</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#ae81ff">3</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#ae81ff">5</span>}]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#ae81ff">2</span>}, {<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">4</span>, <span style="color:#f92672">&#34;bar&#34;</span>: <span style="color:#ae81ff">5</span>}]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">unique_by(length)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;chunky&#34;</span>, <span style="color:#e6db74">&#34;bacon&#34;</span>, <span style="color:#e6db74">&#34;kitten&#34;</span>, <span style="color:#e6db74">&#34;cicada&#34;</span>, <span style="color:#e6db74">&#34;asparagus&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;bacon&#34;</span>, <span style="color:#e6db74">&#34;chunky&#34;</span>, <span style="color:#e6db74">&#34;asparagus&#34;</span>]
</span></span></code></pre></div><h3 id="reverse"><code>reverse</code></h3>
<p>This function reverses an array.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">reverse
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>]
</span></span></code></pre></div><h3 id="contains"><code>contains</code></h3>
<p>The filter <code>contains(b)</code> will produce true if b is
completely contained within the input. A string B is
contained in a string A if B is a substring of A. An array B
is contained in an array A is all elements in B are
contained in any element in A. An object B is contained in
object A if all of the values in B are contained in the
value in A with the same key. All other types are assumed to
be contained in each other if they are equal.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">contains(&#34;bar&#34;)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;foobar&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">contains([&#34;baz&#34;, &#34;bar&#34;])
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;foobar&#34;</span>, <span style="color:#e6db74">&#34;foobaz&#34;</span>, <span style="color:#e6db74">&#34;blarp&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">contains([&#34;bazzzzz&#34;, &#34;bar&#34;])
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;foobar&#34;</span>, <span style="color:#e6db74">&#34;foobaz&#34;</span>, <span style="color:#e6db74">&#34;blarp&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">contains({foo: 12, bar: [{barp: 12}]})
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">12</span>, <span style="color:#f92672">&#34;bar&#34;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,{<span style="color:#f92672">&#34;barp&#34;</span>:<span style="color:#ae81ff">12</span>, <span style="color:#f92672">&#34;blip&#34;</span>:<span style="color:#ae81ff">13</span>}]}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">contains({foo: 12, bar: [{barp: 15}]})
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">12</span>, <span style="color:#f92672">&#34;bar&#34;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,{<span style="color:#f92672">&#34;barp&#34;</span>:<span style="color:#ae81ff">12</span>, <span style="color:#f92672">&#34;blip&#34;</span>:<span style="color:#ae81ff">13</span>}]}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><h3 id="indicess"><code>indices(s)</code></h3>
<p>Outputs an array containing the indices in <code>.</code> where <code>s</code>
occurs.  The input may be an array, in which case if <code>s</code> is an
array then the indices output will be those where all elements
in <code>.</code> match those of <code>s</code>.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">indices(&#34;, &#34;)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;a,b, cd, efg, hijk&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">12</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">indices(1)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">5</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">indices([1,2])
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">8</span>]
</span></span></code></pre></div><h3 id="indexs-rindexs"><code>index(s)</code>, <code>rindex(s)</code></h3>
<p>Outputs the index of the first (<code>index</code>) or last (<code>rindex</code>)
occurrence of <code>s</code> in the input.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">index(&#34;, &#34;)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;a,b, cd, efg, hijk&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">3</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">rindex(&#34;, &#34;)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;a,b, cd, efg, hijk&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">12</span>
</span></span></code></pre></div><h3 id="startswith"><code>startswith</code></h3>
<p>Outputs <code>true</code> if . starts with the given string argument.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.[]|startswith(&#34;foo&#34;)]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;fo&#34;</span>, <span style="color:#e6db74">&#34;foo&#34;</span>, <span style="color:#e6db74">&#34;barfoo&#34;</span>, <span style="color:#e6db74">&#34;foobar&#34;</span>, <span style="color:#e6db74">&#34;barfoob&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>]
</span></span></code></pre></div><h3 id="endswith"><code>endswith</code></h3>
<p>Outputs <code>true</code> if . ends with the given string argument.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.[]|endswith(&#34;foo&#34;)]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;foobar&#34;</span>, <span style="color:#e6db74">&#34;barfoo&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>]
</span></span></code></pre></div><h3 id="ltrimstr"><code>ltrimstr</code></h3>
<p>Outputs its input with the given prefix string removed, if it
starts with it.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.[]|ltrimstr(&#34;foo&#34;)]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;fo&#34;</span>, <span style="color:#e6db74">&#34;foo&#34;</span>, <span style="color:#e6db74">&#34;barfoo&#34;</span>, <span style="color:#e6db74">&#34;foobar&#34;</span>, <span style="color:#e6db74">&#34;afoo&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;fo&#34;</span>,<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;barfoo&#34;</span>,<span style="color:#e6db74">&#34;bar&#34;</span>,<span style="color:#e6db74">&#34;afoo&#34;</span>]
</span></span></code></pre></div><h3 id="rtrimstr"><code>rtrimstr</code></h3>
<p>Outputs its input with the given suffix string removed, if it
starts with it.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.[]|rtrimstr(&#34;foo&#34;)]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;fo&#34;</span>, <span style="color:#e6db74">&#34;foo&#34;</span>, <span style="color:#e6db74">&#34;barfoo&#34;</span>, <span style="color:#e6db74">&#34;foobar&#34;</span>, <span style="color:#e6db74">&#34;foob&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;fo&#34;</span>,<span style="color:#e6db74">&#34;&#34;</span>,<span style="color:#e6db74">&#34;bar&#34;</span>,<span style="color:#e6db74">&#34;foobar&#34;</span>,<span style="color:#e6db74">&#34;foob&#34;</span>]
</span></span></code></pre></div><h3 id="explode"><code>explode</code></h3>
<p>Converts an input string into an array of the string&rsquo;s
codepoint numbers.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">explode
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;foobar&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">102</span>,<span style="color:#ae81ff">111</span>,<span style="color:#ae81ff">111</span>,<span style="color:#ae81ff">98</span>,<span style="color:#ae81ff">97</span>,<span style="color:#ae81ff">114</span>]
</span></span></code></pre></div><h3 id="implode"><code>implode</code></h3>
<p>The inverse of explode.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">implode
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">65</span>, <span style="color:#ae81ff">66</span>, <span style="color:#ae81ff">67</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;ABC&#34;</span>
</span></span></code></pre></div><h3 id="split"><code>split</code></h3>
<p>Splits an input string on the separator argument.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">split(&#34;, &#34;)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;a, b,c,d, e&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b,c,d&#34;</span>,<span style="color:#e6db74">&#34;e&#34;</span>]
</span></span></code></pre></div><h3 id="join"><code>join</code></h3>
<p>Joins the array of elements given as input, using the
argument as separator. It is the inverse of <code>split</code>: that is,
running <code>split(&quot;foo&quot;) | join(&quot;foo&quot;)</code> over any input string
returns said input string.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">join(&#34;, &#34;)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;b,c,d&#34;</span>,<span style="color:#e6db74">&#34;e&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;a, b,c,d, e&#34;</span>
</span></span></code></pre></div><h3 id="recurse"><code>recurse</code></h3>
<p>The <code>recurse</code> function allows you to search through a
recursive structure, and extract interesting data from all
levels. Suppose your input represents a filesystem:</p>
<pre><code>{&quot;name&quot;: &quot;/&quot;, &quot;children&quot;: [
  {&quot;name&quot;: &quot;/bin&quot;, &quot;children&quot;: [
    {&quot;name&quot;: &quot;/bin/ls&quot;, &quot;children&quot;: []},
    {&quot;name&quot;: &quot;/bin/sh&quot;, &quot;children&quot;: []}]},
  {&quot;name&quot;: &quot;/home&quot;, &quot;children&quot;: [
    {&quot;name&quot;: &quot;/home/stephen&quot;, &quot;children&quot;: [
      {&quot;name&quot;: &quot;/home/stephen/jq&quot;, &quot;children&quot;: []}]}]}]}
</code></pre>
<p>Now suppose you want to extract all of the filenames
present. You need to retrieve <code>.name</code>, <code>.children[].name</code>,
<code>.children[].children[].name</code>, and so on. You can do this
with:</p>
<pre><code>recurse(.children[]) | .name
</code></pre>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">recurse(.foo[])
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>:[{<span style="color:#f92672">&#34;foo&#34;</span>: []}, {<span style="color:#f92672">&#34;foo&#34;</span>:[{<span style="color:#f92672">&#34;foo&#34;</span>:[]}]}]}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>:[{<span style="color:#f92672">&#34;foo&#34;</span>:[]},{<span style="color:#f92672">&#34;foo&#34;</span>:[{<span style="color:#f92672">&#34;foo&#34;</span>:[]}]}]}
</span></span><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>:[]}
</span></span><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>:[{<span style="color:#f92672">&#34;foo&#34;</span>:[]}]}
</span></span><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>:[]}
</span></span></code></pre></div><h3 id="recurse_down"><code>recurse_down</code></h3>
<p>A quieter version of <code>recurse(.[])</code>, equivalent to:</p>
<pre><code>def recurse_down: recurse(.[]?);
</code></pre>
<h3 id="heading-5"><code>..</code></h3>
<p>Short-hand for <code>recurse_down</code>.  This is intended to resemble
the XPath <code>//</code> operator.  Note that <code>..a</code> does not work; use
<code>..|a</code> instead.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">..|.a?
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[{<span style="color:#f92672">&#34;a&#34;</span>:<span style="color:#ae81ff">1</span>}]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">1</span>
</span></span></code></pre></div><h3 id="string-interpolation-exp">String interpolation: <code>\(exp)</code></h3>
<p>Inside a string, you can put an expression inside parens
after a backslash. Whatever the expression returns will be
interpolated into the string.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">&#34;The input was \(.), which is one less than \(.+1)&#34;
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">42</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;The input was 42, which is one less than 43&#34;</span>
</span></span></code></pre></div><h3 id="convert-tofrom-json">Convert to/from JSON</h3>
<p>The <code>tojson</code> and <code>fromjson</code> builtins dump values as JSON texts
or parse JSON texts into values, respectively.  The tojson
builtin differs from tostring in that tostring returns strings
unmodified, while tojson encodes strings as JSON strings.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.[]|tostring]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;foo&#34;</span>, [<span style="color:#e6db74">&#34;foo&#34;</span>]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;1&#34;</span>,<span style="color:#e6db74">&#34;foo&#34;</span>,<span style="color:#e6db74">&#34;[\&#34;foo\&#34;]&#34;</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.[]|tojson]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;foo&#34;</span>, [<span style="color:#e6db74">&#34;foo&#34;</span>]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#e6db74">&#34;1&#34;</span>,<span style="color:#e6db74">&#34;\&#34;foo\&#34;&#34;</span>,<span style="color:#e6db74">&#34;[\&#34;foo\&#34;]&#34;</span>]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[.[]|tojson|fromjson]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;foo&#34;</span>, [<span style="color:#e6db74">&#34;foo&#34;</span>]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#e6db74">&#34;foo&#34;</span>,[<span style="color:#e6db74">&#34;foo&#34;</span>]]
</span></span></code></pre></div><h3 id="format-strings-and-escaping">Format strings and escaping</h3>
<p>The <code>@foo</code> syntax is used to format and escape strings,
which is useful for building URLs, documents in a language
like HTML or XML, and so forth. <code>@foo</code> can be used as a
filter on its own, the possible escapings are:</p>
<ul>
<li>
<p><code>@text</code>:</p>
<p>Calls <code>tostring</code>, see that function for details.</p>
</li>
<li>
<p><code>@json</code>:</p>
<p>Serialises the input as JSON.</p>
</li>
<li>
<p><code>@html</code>:</p>
<p>Applies HTML/XML escaping, by mapping the characters
<code>&lt;&gt;&amp;'&quot;</code> to their entity equivalents <code>&amp;lt;</code>, <code>&amp;gt;</code>,
<code>&amp;amp;</code>, <code>&amp;apos;</code>, <code>&amp;quot;</code>.</p>
</li>
<li>
<p><code>@uri</code>:</p>
<p>Applies percent-encoding, by mapping all reserved URI
characters to a <code>%xx</code> sequence.</p>
</li>
<li>
<p><code>@csv</code>:</p>
<p>The input must be an array, and it is rendered as CSV
with double quotes for strings, and quotes escaped by
repetition.</p>
</li>
<li>
<p><code>@sh</code>:</p>
<p>The input is escaped suitable for use in a command-line
for a POSIX shell. If the input is an array, the output
will be a series of space-separated strings.</p>
</li>
<li>
<p><code>@base64</code>:</p>
<p>The input is converted to base64 as specified by RFC 4648.</p>
</li>
</ul>
<p>This syntax can be combined with string interpolation in a
useful way. You can follow a <code>@foo</code> token with a string
literal. The contents of the string literal will <em>not</em> be
escaped. However, all interpolations made inside that string
literal will be escaped. For instance,</p>
<pre><code>@uri &quot;https://www.google.com/search?q=\(.search)&quot;
</code></pre>
<p>will produce the following output for the input
<code>{&quot;search&quot;:&quot;what is jq?&quot;}</code>:</p>
<pre><code>&quot;https://www.google.com/search?q=what%20is%20jq%3f&quot;
</code></pre>
<p>Note that the slashes, question mark, etc. in the URL are
not escaped, as they were part of the string literal.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">@html
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;This works if x &lt; y&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;This works if x &amp;lt; y&#34;</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">@sh &#34;echo \(.)&#34;
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;O&#39;Hara&#39;s Ale&#34;</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;echo &#39;O&#39;\\&#39;&#39;Hara&#39;\\&#39;&#39;s Ale&#39;&#34;</span>
</span></span></code></pre></div><h2 id="conditionals-and-comparisons">Conditionals and Comparisons</h2>
<h3 id="-"><code>==</code>, <code>!=</code></h3>
<p>The expression &lsquo;a == b&rsquo; will produce &rsquo;true&rsquo; if the result of a and b
are equal (that is, if they represent equivalent JSON documents) and
&lsquo;false&rsquo; otherwise. In particular, strings are never considered equal
to numbers. If you&rsquo;re coming from JavaScript, jq&rsquo;s == is like
JavaScript&rsquo;s === - considering values equal only when they have the
same type as well as the same value.</p>
<p>!= is &ldquo;not equal&rdquo;, and &lsquo;a != b&rsquo; returns the opposite value of &lsquo;a == b&rsquo;</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.[] == 1
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1.0</span>, <span style="color:#e6db74">&#34;1&#34;</span>, <span style="color:#e6db74">&#34;banana&#34;</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><h3 id="if-then-else-end">if-then-else-end</h3>
<p><code>if A then B else C end</code> will act the same as <code>B</code> if <code>A</code>
produces a value other than false or null, but act the same
as <code>C</code> otherwise.</p>
<p>Checking for false or null is a simpler notion of
&ldquo;truthiness&rdquo; than is found in JavaScript or Python, but it
means that you&rsquo;ll sometimes have to be more explicit about
the condition you want: you can&rsquo;t test whether, e.g. a
string is empty using <code>if .name then A else B end</code>, you&rsquo;ll
need something more like <code>if (.name | length) &gt; 0 then A else B end</code> instead.</p>
<p>If the condition <code>A</code> produces multiple results, then <code>B</code> is evaluated
once for each result that is not false or null, and <code>C</code> is evaluated
once for each false or null.</p>
<p>More cases can be added to an if using <code>elif A then B</code> syntax.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">if . == 0 then
  &#34;zero&#34;
elif . == 1 then
  &#34;one&#34;
else
  &#34;many&#34;
end
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#e6db74">&#34;many&#34;</span>
</span></span></code></pre></div><h3 id="---"><code>&gt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>&lt;</code></h3>
<p>The comparison operators <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>&lt;</code> return whether
their left argument is greater than, greater than or equal
to, less than or equal to or less than their right argument
(respectively).</p>
<p>The ordering is the same as that described for <code>sort</code>, above.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">. &lt; 5
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">2</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span></code></pre></div><h3 id="and-or-not"><code>and</code>, <code>or</code>, <code>not</code></h3>
<p>jq supports the normal Boolean operators <code>and</code>, <code>or</code>, <code>not</code>.
They have the same standard of truth as if expressions -
<code>false</code> and <code>null</code> are considered &ldquo;false values&rdquo;, and
anything else is a &ldquo;true value&rdquo;.</p>
<p>If an operand of one of these operators produces multiple
results, the operator itself will produce a result for each input.</p>
<p><code>not</code> is in fact a builtin function rather than an operator,
so it is called as a filter to which things can be piped
rather than with special syntax, as in <code>.foo and .bar | not</code>.</p>
<p>These three only produce the values <code>true</code> and <code>false</code>, and
so are only useful for genuine Boolean operations, rather
than the common Perl/Python/Ruby idiom of
&ldquo;value_that_may_be_null or default&rdquo;. If you want to use this
form of &ldquo;or&rdquo;, picking between two values rather than
evaluating a condition, see the <code>//</code> operator below.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">42 and &#34;a string&#34;
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">(true, false) or false
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">(true, true) and (true, false)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">[true, false | not]
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#66d9ef">null</span>
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">true</span>]
</span></span></code></pre></div><h3 id="alternative-operator-">Alternative operator: <code>//</code></h3>
<p>A filter of the form <code>a // b</code> produces the same
results as <code>a</code>, if <code>a</code> produces results other than <code>false</code>
and <code>null</code>. Otherwise, <code>a // b</code> produces the same results as <code>b</code>.</p>
<p>This is useful for providing defaults: <code>.foo // 1</code> will
evaluate to <code>1</code> if there&rsquo;s no <code>.foo</code> element in the
input. It&rsquo;s similar to how <code>or</code> is sometimes used in Python
(jq&rsquo;s <code>or</code> operator is reserved for strictly Boolean
operations).</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.foo // 42
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">19</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">19</span>
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.foo // 42
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">42</span>
</span></span></code></pre></div><h2 id="advanced-features">Advanced features</h2>
<p>Variables are an absolute necessity in most programming languages, but
they&rsquo;re relegated to an &ldquo;advanced feature&rdquo; in jq.</p>
<p>In most languages, variables are the only means of passing around
data. If you calculate a value, and you want to use it more than once,
you&rsquo;ll need to store it in a variable. To pass a value to another part
of the program, you&rsquo;ll need that part of the program to define a
variable (as a function parameter, object member, or whatever) in
which to place the data.</p>
<p>It is also possible to define functions in jq, although this is
is a feature whose biggest use is defining jq&rsquo;s standard library
(many jq functions such as <code>map</code> and <code>select</code> are in fact written
in jq).</p>
<p>Finally, jq has a <code>reduce</code> operation, which is very powerful but a
bit tricky. Again, it&rsquo;s mostly used internally, to define some
useful bits of jq&rsquo;s standard library.</p>
<h3 id="variables">Variables</h3>
<p>In jq, all filters have an input and an output, so manual
plumbing is not necessary to pass a value from one part of a program
to the next. Many expressions, for instance <code>a + b</code>, pass their input
to two distinct subexpressions (here <code>a</code> and <code>b</code> are both passed the
same input), so variables aren&rsquo;t usually necessary in order to use a
value twice.</p>
<p>For instance, calculating the average value of an array of numbers
requires a few variables in most languages - at least one to hold the
array, perhaps one for each element or for a loop counter. In jq, it&rsquo;s
simply <code>add / length</code> - the <code>add</code> expression is given the array and
produces its sum, and the <code>length</code> expression is given the array and
produces its length.</p>
<p>So, there&rsquo;s generally a cleaner way to solve most problems in jq than
defining variables. Still, sometimes they do make things easier, so jq
lets you define variables using <code>expression as $variable</code>. All
variable names start with <code>$</code>. Here&rsquo;s a slightly uglier version of the
array-averaging example:</p>
<pre><code>length as $array_length | add / $array_length
</code></pre>
<p>We&rsquo;ll need a more complicated problem to find a situation where using
variables actually makes our lives easier.</p>
<p>Suppose we have an array of blog posts, with &ldquo;author&rdquo; and &ldquo;title&rdquo;
fields, and another object which is used to map author usernames to
real names. Our input looks like:</p>
<pre><code>{&quot;posts&quot;: [{&quot;title&quot;: &quot;First post&quot;, &quot;author&quot;: &quot;anon&quot;},
           {&quot;title&quot;: &quot;A well-written article&quot;, &quot;author&quot;: &quot;person1&quot;}],
 &quot;realnames&quot;: {&quot;anon&quot;: &quot;Anonymous Coward&quot;,
               &quot;person1&quot;: &quot;Person McPherson&quot;}}
</code></pre>
<p>We want to produce the posts with the author field containing a real
name, as in:</p>
<pre><code>{&quot;title&quot;: &quot;First post&quot;, &quot;author&quot;: &quot;Anonymous Coward&quot;}
{&quot;title&quot;: &quot;A well-written article&quot;, &quot;author&quot;: &quot;Person McPherson&quot;}
</code></pre>
<p>We use a variable, $names, to store the realnames object, so that we
can refer to it later when looking up author usernames:</p>
<pre><code>.realnames as $names | .posts[] | {title, author: $names[.author]}
</code></pre>
<p>The expression <code>exp as $x | ...</code> means: for each value of expression
<code>exp</code>, run the rest of the pipeline with the entire original input, and
with <code>$x</code> set to that value.  Thus <code>as</code> functions as something of a
foreach loop.</p>
<p>Variables are scoped over the rest of the expression that defines
them, so</p>
<pre><code>.realnames as $names | (.posts[] | {title, author: $names[.author]})
</code></pre>
<p>will work, but</p>
<pre><code>(.realnames as $names | .posts[]) | {title, author: $names[.author]}
</code></pre>
<p>won&rsquo;t.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.bar as $x | .foo | . + $x
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>:<span style="color:#ae81ff">10</span>, <span style="color:#f92672">&#34;bar&#34;</span>:<span style="color:#ae81ff">200</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">210</span>
</span></span></code></pre></div><h3 id="defining-functions">Defining Functions</h3>
<p>You can give a filter a name using &ldquo;def&rdquo; syntax:</p>
<pre><code>def increment: . + 1;
</code></pre>
<p>From then on, <code>increment</code> is usable as a filter just like a
builtin function (in fact, this is how some of the builtins
are defined). A function may take arguments:</p>
<pre><code>def map(f): [.[] | f];
</code></pre>
<p>Arguments are passed as filters, not as values. The
same argument may be referenced multiple times with
different inputs (here <code>f</code> is run for each element of the
input array). Arguments to a function work more like
callbacks than like value arguments.</p>
<p>If you want the value-argument behaviour for defining simple
functions, you can just use a variable:</p>
<pre><code>def addvalue(f): f as $value | map(. + $value);
</code></pre>
<p>With that definition, <code>addvalue(.foo)</code> will add the current
input&rsquo;s <code>.foo</code> field to each element of the array.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">def addvalue(f): . + [f]; map(addvalue(.[0]))
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>],[<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">20</span>]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>], [<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">10</span>]]
</span></span></code></pre></div><p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">def addvalue(f): f as $x | map(. + $x); addvalue(.[0])
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>],[<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">20</span>]]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>], [<span style="color:#ae81ff">10</span>,<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>]]
</span></span></code></pre></div><h3 id="reduce"><code>reduce</code></h3>
<p>The <code>reduce</code> syntax allows you to combine all of the results of
an expression by accumulating them into a single answer.
The form is <code>reduce EXP as $var (INIT; UPDATE)</code>.
As an example, we&rsquo;ll pass <code>[1,2,3]</code> to this expression:</p>
<pre><code>reduce .[] as $item (0; . + $item)
</code></pre>
<p>For each result that <code>.[]</code> produces, <code>. + $item</code> is run to
accumulate a running total, starting from 0 as the input value.
In this example, <code>.[]</code> produces the results <code>1</code>, <code>2</code>, and <code>3</code>,
so the effect is similar to running something like this:</p>
<pre><code>0 | 1 as $item | . + $item |
    2 as $item | . + $item |
    3 as $item | . + $item
</code></pre>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">reduce .[] as $item (0; . + $item)
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>]
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#ae81ff">15</span>
</span></span></code></pre></div><h2 id="assignment">Assignment</h2>
<p>Assignment works a little differently in jq than in most
programming languages. jq doesn&rsquo;t distinguish between references
to and copies of something - two objects or arrays are either
equal or not equal, without any further notion of being &ldquo;the
same object&rdquo; or &ldquo;not the same object&rdquo;.</p>
<p>If an object has two fields which are arrays, <code>.foo</code> and <code>.bar</code>,
and you append something to <code>.foo</code>, then <code>.bar</code> will not get
bigger. Even if you&rsquo;ve just set <code>.bar = .foo</code>. If you&rsquo;re used to
programming in languages like Python, Java, Ruby, JavaScript,
etc. then you can think of it as though jq does a full deep copy
of every object before it does the assignment (for performance,
it doesn&rsquo;t actually do that, but that&rsquo;s the general idea).</p>
<h3 id="heading-6"><code>=</code></h3>
<p>The filter <code>.foo = 1</code> will take as input an object
and produce as output an object with the &ldquo;foo&rdquo; field set to</p>
<ol>
<li>There is no notion of &ldquo;modifying&rdquo; or &ldquo;changing&rdquo; something
in jq - all jq values are immutable. For instance,</li>
</ol>
<p>.foo = .bar | .foo.baz = 1</p>
<p>will not have the side-effect of setting .bar.baz to be set
to 1, as the similar-looking program in JavaScript, Python,
Ruby or other languages would. Unlike these languages (but
like Haskell and some other functional languages), there is
no notion of two arrays or objects being &ldquo;the same array&rdquo; or
&ldquo;the same object&rdquo;. They can be equal, or not equal, but if
we change one of them in no circumstances will the other
change behind our backs.</p>
<p>This means that it&rsquo;s impossible to build circular values in
jq (such as an array whose first element is itself). This is
quite intentional, and ensures that anything a jq program
can produce can be represented in JSON.</p>
<h3 id="heading-7"><code>|=</code></h3>
<p>As well as the assignment operator &lsquo;=&rsquo;, jq provides the &ldquo;update&rdquo;
operator &lsquo;|=&rsquo;, which takes a filter on the right-hand side and
works out the new value for the property being assigned to by running
the old value through this expression. For instance, .foo |= .+1 will
build an object with the &ldquo;foo&rdquo; field set to the input&rsquo;s &ldquo;foo&rdquo; plus 1.</p>
<p>This example should show the difference between &lsquo;=&rsquo; and &lsquo;|=&rsquo;:</p>
<p>Provide input &lsquo;{&ldquo;a&rdquo;: {&ldquo;b&rdquo;: 10}, &ldquo;b&rdquo;: 20}&rsquo; to the programs:</p>
<p>.a = .b
.a |= .b</p>
<p>The former will set the &ldquo;a&rdquo; field of the input to the &ldquo;b&rdquo; field of the
input, and produce the output {&ldquo;a&rdquo;: 20}. The latter will set the &ldquo;a&rdquo;
field of the input to the &ldquo;a&rdquo; field&rsquo;s &ldquo;b&rdquo; field, producing {&ldquo;a&rdquo;: 10}.</p>
<h3 id="------"><code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code>, <code>//=</code></h3>
<p>jq has a few operators of the form <code>a op= b</code>, which are all
equivalent to <code>a |= . op b</code>. So, <code>+= 1</code> can be used to increment values.</p>
<p>program:</p>
<pre tabindex="0"><code class="language-jq" data-lang="jq">.foo += 1
</code></pre><p>input:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">42</span>}
</span></span></code></pre></div><p>output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{<span style="color:#f92672">&#34;foo&#34;</span>: <span style="color:#ae81ff">43</span>}
</span></span></code></pre></div><h3 id="complex-assignments">Complex assignments</h3>
<p>Lots more things are allowed on the left-hand side of a jq assignment
than in most languages. We&rsquo;ve already seen simple field accesses on
the left hand side, and it&rsquo;s no surprise that array accesses work just
as well:</p>
<pre><code>.posts[0].title = &quot;JQ Manual&quot;
</code></pre>
<p>What may come as a surprise is that the expression on the left may
produce multiple results, referring to different points in the input
document:</p>
<pre><code>.posts[].comments |= . + [&quot;this is great&quot;]
</code></pre>
<p>That example appends the string &ldquo;this is great&rdquo; to the &ldquo;comments&rdquo;
array of each post in the input (where the input is an object with a
field &ldquo;posts&rdquo; which is an array of posts).</p>
<p>When jq encounters an assignment like &lsquo;a = b&rsquo;, it records the &ldquo;path&rdquo;
taken to select a part of the input document while executing a. This
path is then used to find which part of the input to change while
executing the assignment. Any filter may be used on the
left-hand side of an equals - whichever paths it selects from the
input will be where the assignment is performed.</p>
<p>This is a very powerful operation. Suppose we wanted to add a comment
to blog posts, using the same &ldquo;blog&rdquo; input above. This time, we only
want to comment on the posts written by &ldquo;stedolan&rdquo;. We can find those
posts using the &ldquo;select&rdquo; function described earlier:</p>
<pre><code>.posts[] | select(.author == &quot;stedolan&quot;)
</code></pre>
<p>The paths provided by this operation point to each of the posts that
&ldquo;stedolan&rdquo; wrote, and we can comment on each of them in the same way
that we did before:</p>
<pre><code>(.posts[] | select(.author == &quot;stedolan&quot;) | .comments) |=
    . + [&quot;terrible.&quot;]
</code></pre>

</main>

    <footer class="bd-footer bg-body-tertiary">
  <div class="py-3 text-center">
    <p>
      This website is made with <a href="https://getbootstrap.com" target="_blank" rel="noopener">Bootstrap</a>,
      themed with <a href="https://bootswatch.com" target="_blank" rel="noopener">Bootswatch</a>.
    </p>
    <p>
      jq is licensed under the MIT license (code) and the
      <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank" rel="noopener">CC-BY-3.0</a> license (docs).
    </p>
  </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

  </body>
</html>
